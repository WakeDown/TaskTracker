@using TaskTracker.Models
@model TaskTracker.Models.TaskClaim
@{
    if (Model.ParentTaskId.HasValue)
    {
        ViewBag.Title = "Новая подзадача";
    }
    else
    {
        ViewBag.Title = "Новая задача";
    }
    Layout = "~/Views/Shared/_Layout.cshtml";
    }
<p>
    <div class="red lighten-3 red-text">
        @TempData["error"]
    </div>
    @using (Html.BeginForm("New", "Task", FormMethod.Post, new { enctype = "multipart/form-data", role = "form" }))
    {
        @Html.HiddenFor(m=>m.ParentTaskId)
        @Html.HiddenFor(m => m.ProjectId)
        <div class="row">
            <div class="col s3">
                <label for="project">Проект</label>
                @if (Model.ParentTaskId.HasValue)
                {
                    @:Главная задача
                }
                else
                {
                    @Html.DropDownListFor(m => m.ProjectId, Project.GetSelectionList(), "--выберите проект--", new { id = "project", @class = "validate browser-default", required = "required" })
                }
            </div>
        </div>
    <div class="row">
                  <div class="input-field col  l6 s12">
                      @Html.TextBoxFor(m => m.Name, new {@id = "name", @class = "validate", required = "required"})
                      <label for="name">Название</label>
                  </div>
              </div>
        <div class="row">
            <div class="input-field col l6 s12">
                @Html.TextAreaFor(m => m.Descr, new {@id = "descr", @class = "validate materialize-textarea", rows = "5"})
                <label for="descr">Описание</label>
            </div>
        </div>
        @*<div class="row">
            <div class="col s3">
                <label for="category">Категория</label>
                @Html.DropDownListFor(m => m.TaskCategoryId, TaskCategory.GetSelectionList(), new {required = "required", id = "category", @class = "browser-default"})
            </div>
        </div>
        <div class="row">
            <div class="col s3">
                <label for="specialist">Специалист</label>
                @Html.DropDownListFor(m => m.SpecialistSid, Specialist.GetProgrammersSelectionList(), "--специалист не указан--", new { id = "specialist", @class = "browser-default" })
            </div>
        </div>*@
        <div class="row">
            <div class="col l6 s12">
                @Html.Partial("AddFile")
            </div>
        </div>
        <button class="btn waves-effect waves-light" type="submit" name="WindowClose" value="WindowClose">
            Сохранить и закрыть
        </button>
        <button class="btn waves-effect waves-light" type="submit" name="Continue" value="Continue">
            Сохранить и продолжить
        </button>
    }
</p>
